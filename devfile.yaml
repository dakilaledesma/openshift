schemaVersion: 2.2.0
metadata:
  name: python-nodejs-workspace
  version: 1.0.0

components:
  - name: universal-developer-image
    container:
      image: registry.redhat.io/devspaces/udi-rhel8@sha256:d14789c643a0127cfc868daeee0ff416a8df922fe2a7c716ebfc4577ff326fa2
      memoryLimit: 4Gi
      mountSources: true
      endpoints:
        - name: http-app
          targetPort: 8080
        - name: nodejs
          targetPort: 3000

commands:
  - id: pip-install
    exec:
      component: universal-developer-image
      commandLine: pip install --user -r requirements.txt
      workingDir: ${PROJECT_SOURCE}
      
  - id: npm-install
    exec:
      component: universal-developer-image
      commandLine: npm install
      workingDir: ${PROJECT_SOURCE}
